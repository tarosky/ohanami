# Ohanami é–‹ç™ºã‚¬ã‚¤ãƒ‰

WordPressã‚µã‚¤ãƒˆå¥åº·ç®¡ç†ãƒ„ãƒ¼ãƒ«ã€ŒOhanamiã€ã®ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã®ä½¿ã„æ–¹ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. å®Œå…¨ãªé–‹ç™ºç’°å¢ƒç«‹ã¡ä¸Šã’
```bash
npm run dev:setup
```
ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§ä»¥ä¸‹ãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã¾ã™ï¼š
- Docker MySQLã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•
- 10ç§’å¾…æ©Ÿï¼ˆDBåˆæœŸåŒ–æ™‚é–“ï¼‰
- Node.jsã‚µãƒ¼ãƒãƒ¼ã‚’ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§èµ·å‹•

### 2. APIãƒ†ã‚¹ãƒˆ
```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šç¢ºèª
npm run test:health

# WordPresså ±å‘ŠAPIï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰ãƒ†ã‚¹ãƒˆ
npm run test:report
```

### 3. é–‹ç™ºç’°å¢ƒã®åœæ­¢
```bash
npm run dev:teardown
```

## ğŸ“‹ ä½¿ç”¨å¯èƒ½ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆ

### ã‚µãƒ¼ãƒãƒ¼ç®¡ç†
- `npm run start:dev` - Node.jsã‚µãƒ¼ãƒãƒ¼ã‚’ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§èµ·å‹•
- `npm run stop:dev` - ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢
- `npm run dev` - ãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§èµ·å‹•ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ä»˜ãï¼‰

### Dockerç®¡ç†
- `npm run docker:up` - MySQLã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•
- `npm run docker:down` - MySQLã‚³ãƒ³ãƒ†ãƒŠã‚’åœæ­¢
- `npm run docker:logs` - MySQLãƒ­ã‚°ã‚’è¡¨ç¤º

### ãƒ†ã‚¹ãƒˆ
- `npm run test:health` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ†ã‚¹ãƒˆ
- `npm run test:report` - WordPresså ±å‘ŠAPIãƒ†ã‚¹ãƒˆï¼ˆreporter.sample.jsonä½¿ç”¨ï¼‰

### é–‹ç™ºãƒ•ãƒ­ãƒ¼
- `npm run dev:setup` - å®Œå…¨ãªé–‹ç™ºç’°å¢ƒç«‹ã¡ä¸Šã’
- `npm run dev:teardown` - å®Œå…¨ãªç’°å¢ƒåœæ­¢ãƒ»ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

## ğŸ”§ æ‰‹å‹•æ“ä½œ

### å€‹åˆ¥ã§ã®ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
```bash
# MySQLã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•
npm run docker:up

# Node.jsã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ï¼‰
npm run start:dev

# ã‚µãƒ¼ãƒãƒ¼çŠ¶æ³ç¢ºèª
cat server.log
```

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
```bash
# ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°ç¢ºèª
cat server.log

# MySQLãƒ­ã‚°ç¢ºèª
npm run docker:logs

# ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
ps aux | grep node
```

## ğŸ“¡ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### å¥åº·ãƒã‚§ãƒƒã‚¯
- `GET /api/health/database` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šç¢ºèª

### WordPresså ±å‘Š
- `POST /api/wordpress-report` - WordPressã‚µã‚¤ãƒˆæƒ…å ±ä¿å­˜
- `GET /api/reports` - ä¿å­˜æ¸ˆã¿ãƒ¬ãƒãƒ¼ãƒˆä¸€è¦§

### èªè¨¼
å…¨APIã§ Bearer tokenèªè¨¼ãŒå¿…è¦ï¼š
```
Authorization: Bearer dev-secret-key-change-in-production
```

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 

- **managers**: ç®¡ç†è€…æƒ…å ±ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ã‚¿ãƒ­ã‚¹ã‚«ã‚¤ï¼‰
- **servers**: ã‚µãƒ¼ãƒãƒ¼æƒ…å ±ï¼ˆsakura + hostname + username ã§è­˜åˆ¥ï¼‰
- **reports**: ãƒ¬ãƒãƒ¼ãƒˆå®Ÿè¡Œå±¥æ­´
- **wordpress_sites**: WordPressã‚µã‚¤ãƒˆåŸºæœ¬æƒ…å ±
- **plugins**: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è©³ç´°æƒ…å ±
- **themes**: ãƒ†ãƒ¼ãƒè©³ç´°æƒ…å ±

## ğŸ³ Dockerç’°å¢ƒ

- **MySQL**: ãƒãƒ¼ãƒˆ3308
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: ohanami_dev
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼**: dev / password

## ğŸ“ é–‹ç™ºæ™‚ã®æ³¨æ„ç‚¹

1. **ãƒãƒ¼ãƒˆã®ç«¶åˆ**: MySQLæ¨™æº–ãƒãƒ¼ãƒˆ3306ãŒä½¿ç”¨ä¸­ã®ãŸã‚ã€3308ã‚’ä½¿ç”¨
2. **æ–‡å­—åŒ–ã‘**: æ—¥æœ¬èªãƒ‡ãƒ¼ã‚¿ã¯UTF-8ã§ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™
3. **ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†**: `server.pid` ã§ãƒ—ãƒ­ã‚»ã‚¹IDã‚’ç®¡ç†ã—ã¦ã„ã¾ã™
